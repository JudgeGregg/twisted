

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>The Twisted Plugin System &mdash; Twisted 22.4.0.post0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/custom.js"></script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" defer hack=""></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The Basics" href="basics.html" />
    <link rel="prev" title="Cred: Pluggable Authentication" href="cred.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Twisted
          

          
          </a>

          
            
            
              <div class="version">
                22.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installing Twisted</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Twisted Core</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Developer Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="vision.html">The Vision For Twisted</a></li>
<li class="toctree-l3"><a class="reference internal" href="servers.html">Writing Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="clients.html">Writing Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="trial.html">Test-driven development with Twisted</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/index.html">Twisted from Scratch, or The Evolution of Finger</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/intro.html">The Evolution of Finger: building a simple finger service</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/protocol.html">The Evolution of Finger: adding features to the finger service</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/style.html">The Evolution of Finger: cleaning up the finger code</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/components.html">The Evolution of Finger: moving to a component based architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/backends.html">The Evolution of Finger: pluggable backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/web.html">The Evolution of Finger: a web frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/pb.html">The Evolution of Finger: Twisted client support using Perspective Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/factory.html">The Evolution of Finger: using a single factory for multiple protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/client.html">The Evolution of Finger: a Twisted finger client</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/library.html">The Evolution of Finger: making a finger library</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/configuration.html">The Evolution of Finger: configuration of the finger service</a></li>
<li class="toctree-l3"><a class="reference internal" href="quotes.html">Setting up the TwistedQuotes application</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html">Designing Twisted Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="internet-overview.html">Overview of Twisted Internet</a></li>
<li class="toctree-l3"><a class="reference internal" href="reactor-basics.html">Reactor Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssl.html">Using TLS in Twisted</a></li>
<li class="toctree-l3"><a class="reference internal" href="udp.html">UDP Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="process.html">Using Processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="defer-intro.html">Introduction to Deferreds</a></li>
<li class="toctree-l3"><a class="reference internal" href="defer.html">Deferred Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="gendefer.html">Generating Deferreds</a></li>
<li class="toctree-l3"><a class="reference internal" href="time.html">Scheduling tasks for the future</a></li>
<li class="toctree-l3"><a class="reference internal" href="threading.html">Using Threads in Twisted</a></li>
<li class="toctree-l3"><a class="reference internal" href="producers.html">Producers and Consumers: Efficient High-Volume Streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="choosing-reactor.html">Choosing a Reactor and GUI Toolkit Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="endpoints.html">Getting Connected with Endpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html">Components: Interfaces and Adapters</a></li>
<li class="toctree-l3"><a class="reference internal" href="cred.html">Cred: Pluggable Authentication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The Twisted Plugin System</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-extensible-programs">Writing Extensible Programs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extending-an-existing-program">Extending an Existing Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alternate-plugin-packages">Alternate Plugin Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-caching">Plugin Caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="basics.html">The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="application.html">Using the Twisted Application Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="tap.html">Writing a twistd Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="systemd.html">Deploying Twisted with systemd</a></li>
<li class="toctree-l3"><a class="reference internal" href="logger.html">Logging with twisted.logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Twistedâ€™s Legacy Logging System: <code class="docutils literal notranslate"><span class="pre">twisted.python.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="constants.html">Symbolic Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="rdbms.html">twisted.enterprise.adbapi: Twisted RDBMS support</a></li>
<li class="toctree-l3"><a class="reference internal" href="options.html">Parsing command-lines with usage.Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="dirdbm.html">DirDBM: Directory-based Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="testing.html">Writing tests for Twisted code using Trial</a></li>
<li class="toctree-l3"><a class="reference internal" href="sendmsg.html">Extremely Low-Level Socket Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="amp.html">Asynchronous Messaging Protocol Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb.html">Overview of Twisted Spread</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-intro.html">Introduction to Perspective Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-usage.html">Using Perspective Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-clients.html">Managing Clients of Perspectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-copyable.html">PB Copyable: Passing Complex Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-cred.html">Authentication with Perspective Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="pb-limits.html">PB Limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="python3.html">Porting to Python 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="positioning.html">Twisted Positioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="glossary.html">Twisted Glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug-with-emacs.html">Debugging Python(Twisted) with Emacs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specifications/index.html">Specifications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conch/index.html">Twisted Conch (SSH and Telnet)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mail/index.html">Twisted Mail (SMTP, POP, and IMAP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../names/index.html">Twisted Names (DNS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pair/index.html">Twisted Pair</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/index.html">Twisted Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../words/index.html">Twisted Words (IRC and XMPP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development of Twisted</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../historic/index.html">Historical Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Report a security issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html#security-procedure-for-developers">Security Procedure for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html#security-audit">Security Audit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Twisted Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/twisted/twisted">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/twisted">PyPI</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Twisted</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Twisted Core</a> &raquo;</li>
        
          <li><a href="index.html">Developer Guides</a> &raquo;</li>
        
      <li>The Twisted Plugin System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/core/howto/plugin.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-twisted-plugin-system">
<h1>The Twisted Plugin System<a class="headerlink" href="#the-twisted-plugin-system" title="Permalink to this heading">Â¶</a></h1>
<p>The purpose of this guide is to describe the preferred way to
write extensible Twisted applications (and consequently, also to
describe how to extend applications written in such a way).  This
extensibility is achieved through the definition of one or more
APIs and a mechanism for collecting code plugins which
implement this API to provide some additional functionality.
At the base of this system is the <code class="xref py py-mod docutils literal notranslate"><span class="pre">twisted.plugin</span></code> module.</p>
<p>Making an application extensible using the plugin system has
several strong advantages over other techniques:</p>
<ul class="simple">
<li><p>It allows third-party developers to easily enhance your
software in a way that is loosely coupled: only the plugin API
is required to remain stable.</p></li>
<li><p>It allows new plugins to be discovered flexibly.  For
example, plugins can be loaded and saved when a program is first
run, or re-discovered each time the program starts up, or they
can be polled for repeatedly at runtime (allowing the discovery
of new plugins installed after the program has started).</p></li>
</ul>
<div class="section" id="writing-extensible-programs">
<h2>Writing Extensible Programs<a class="headerlink" href="#writing-extensible-programs" title="Permalink to this heading">Â¶</a></h2>
<p>Taking advantage of <code class="xref py py-mod docutils literal notranslate"><span class="pre">twisted.plugin</span></code> is
a two step process:</p>
<ol class="arabic">
<li><p>Define an interface which plugins will be required to implement.
This is done using the zope.interface package in the same way one
would define an interface for any other purpose.</p>
<p>A convention for defining interfaces is do so in a file named like
<em>ProjectName/projectname/iprojectname.py</em> .  The rest of this
document will follow that convention: consider the following
interface definition be in <code class="docutils literal notranslate"><span class="pre">Matsim/matsim/imatsim.py</span></code> , an
interface definition module for a hypothetical material simulation
package.</p>
</li>
<li><p>At one or more places in your program, invoke <code class="xref py py-func docutils literal notranslate"><span class="pre">twisted.plugin.getPlugins()</span></code> and iterate over its
result.</p></li>
</ol>
<p>As an example of the first step, consider the following interface
definition for a physical modelling system.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Attribute</span>

<span class="k">class</span> <span class="nc">IMaterial</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An object with specific physical properties</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">yieldStress</span><span class="p">(</span><span class="n">temperature</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the pressure this material can support without</span>
<span class="sd">        fracturing at the given temperature.</span>

<span class="sd">        @type temperature: C{float}</span>
<span class="sd">        @param temperature: Kelvins</span>

<span class="sd">        @rtype: C{float}</span>
<span class="sd">        @return: Pascals</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="n">dielectricConstant</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        @type dielectricConstant: C</span><span class="si">{complex}</span><span class="s2"></span>
<span class="s2">        @ivar dielectricConstant: The relative permittivity, with the</span>
<span class="s2">        real part giving reflective surface properties and the</span>
<span class="s2">        imaginary part giving the radio absorption coefficient.</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In another module, we might have a function that operates on
objects providing the <code class="docutils literal notranslate"><span class="pre">IMaterial</span></code> interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">displayMaterial</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A material with yield stress </span><span class="si">%s</span><span class="s1"> at 500 K&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">yieldStress</span><span class="p">(</span><span class="mi">500</span><span class="p">),))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Also a dielectric constant of </span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">dielectricConstant</span><span class="p">,))</span>
</pre></div>
</div>
<p>The last piece of required code is that which collects
<code class="docutils literal notranslate"><span class="pre">IMaterial</span></code> providers and passes them to the
<code class="docutils literal notranslate"><span class="pre">displayMaterial</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">twisted.plugin</span> <span class="kn">import</span> <span class="n">getPlugins</span>
<span class="kn">from</span> <span class="nn">matsim</span> <span class="kn">import</span> <span class="n">imatsim</span>

<span class="k">def</span> <span class="nf">displayAllKnownMaterials</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="n">getPlugins</span><span class="p">(</span><span class="n">imatsim</span><span class="o">.</span><span class="n">IMaterial</span><span class="p">):</span>
        <span class="n">displayMaterial</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>
</div>
<p>Third party developers may now contribute different materials
to be used by this modelling system by implementing one or more
plugins for the <code class="docutils literal notranslate"><span class="pre">IMaterial</span></code> interface.</p>
</div>
<div class="section" id="extending-an-existing-program">
<h2>Extending an Existing Program<a class="headerlink" href="#extending-an-existing-program" title="Permalink to this heading">Â¶</a></h2>
<p>The above code demonstrates how an extensible program might be
written using Twistedâ€™s plugin system.  How do we write plugins
for it, though?  Essentially, we create objects which provide the
required interface and then make them available at a particular
location.  Consider the following example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">implementer</span>
<span class="kn">from</span> <span class="nn">twisted.plugin</span> <span class="kn">import</span> <span class="n">IPlugin</span>
<span class="kn">from</span> <span class="nn">matsim</span> <span class="kn">import</span> <span class="n">imatsim</span>

<span class="nd">@implementer</span><span class="p">(</span><span class="n">IPlugin</span><span class="p">,</span> <span class="n">imatsim</span><span class="o">.</span><span class="n">IMaterial</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SimpleMaterial</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yieldStressFactor</span><span class="p">,</span> <span class="n">dielectricConstant</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yieldStressFactor</span> <span class="o">=</span> <span class="n">yieldStressFactor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dielectricConstant</span> <span class="o">=</span> <span class="n">dielectricConstant</span>

    <span class="k">def</span> <span class="nf">yieldStress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">temperature</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yieldStressFactor</span> <span class="o">*</span> <span class="n">temperature</span>

<span class="n">steelPlate</span> <span class="o">=</span> <span class="n">SimpleMaterial</span><span class="p">(</span><span class="mf">2.06842719e11</span><span class="p">,</span> <span class="mf">2.7</span> <span class="o">+</span> <span class="mf">0.2</span><span class="n">j</span><span class="p">)</span>
<span class="n">brassPlate</span> <span class="o">=</span> <span class="n">SimpleMaterial</span><span class="p">(</span><span class="mf">1.03421359e11</span><span class="p">,</span> <span class="mf">1.4</span> <span class="o">+</span> <span class="mf">0.5</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">steelPlate</span></code> and <code class="docutils literal notranslate"><span class="pre">brassPlate</span></code> now provide both
<code class="xref py py-class docutils literal notranslate"><span class="pre">IPlugin</span></code> and <code class="docutils literal notranslate"><span class="pre">IMaterial</span></code> .
All that remains is to make this module available at an appropriate
location. For this, there are two options. The first of these is
primarily useful during development: if a directory which
has been added to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> (typically by adding it to the
<code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment variable) contains a
<em>directory</em> named <code class="docutils literal notranslate"><span class="pre">twisted/plugins/</span></code> ,
each <code class="docutils literal notranslate"><span class="pre">.py</span></code> file in that directory will be loaded
as a source of plugins.  This directory <em>must not</em> be a Python
package: including <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> will cause the
directory to be skipped and no plugins loaded from it.  Second, each
module in the installed version of Twistedâ€™s <code class="docutils literal notranslate"><span class="pre">twisted.plugins</span></code> package will also be loaded as a source of
plugins.</p>
<p>Once this plugin is installed in one of these two ways,
<code class="docutils literal notranslate"><span class="pre">displayAllKnownMaterials</span></code> can be run and we will see
two pairs of output: one for a steel plate and one for a brass
plate.</p>
</div>
<div class="section" id="alternate-plugin-packages">
<h2>Alternate Plugin Packages<a class="headerlink" href="#alternate-plugin-packages" title="Permalink to this heading">Â¶</a></h2>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">getPlugins</span></code> takes one
additional argument not mentioned above.  If passed in, the 2nd argument
should be a module or package to be used instead of
<code class="docutils literal notranslate"><span class="pre">twisted.plugins</span></code> as the plugin meta-package.  If you
are writing a plugin for a Twisted interface, you should never
need to pass this argument.  However, if you have developed an
interface of your own, you may want to mandate that plugins for it
are installed in your own plugins package, rather than in
Twistedâ€™s.</p>
<p>You may want to support <code class="docutils literal notranslate"><span class="pre">yourproject/plugins/</span></code>
directories for ease of development.  To do so, you should make <code class="docutils literal notranslate"><span class="pre">yourproject/plugins/__init__.py</span></code> contain at least
the following lines.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">twisted.plugin</span> <span class="kn">import</span> <span class="n">pluginPackagePaths</span>
<span class="n">__path__</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pluginPackagePaths</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>The key behavior here is that interfaces are essentially paired
with a particular plugin package.  If plugins are installed in a
different package than the one the code which relies on the
interface they provide, they will not be found when the
application goes to load them.</p>
</div>
<div class="section" id="plugin-caching">
<h2>Plugin Caching<a class="headerlink" href="#plugin-caching" title="Permalink to this heading">Â¶</a></h2>
<p>In the course of using the Twisted plugin system, you may
notice <code class="docutils literal notranslate"><span class="pre">dropin.cache</span></code> files appearing at
various locations.  These files are used to cache information
about what plugins are present in the directory which contains
them.  At times, this cached information may become out of date.
Twisted uses the mtimes of various files involved in the plugin
system to determine when this cache may have become invalid.
Twisted will try to re-write the cache each time it tries to use
it but finds it out of date.</p>
<p>For a site-wide install, it may not (indeed, should not) be
possible for applications running as normal users to rewrite the
cache file.  While these applications will still run and find
correct plugin information, they may run more slowly than they
would if the cache was up to date, and they may also report
exceptions if certain plugins have been removed but which the
cache still references.  For these reasons, when installing or
removing software which provides Twisted plugins, the site
administrator should be sure the cache is regenerated.
Well-behaved package managers for such software should take this
task upon themselves, since it is trivially automatable.  The
canonical way to regenerate the cache is to run the following
Python code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">twisted.plugin</span> <span class="kn">import</span> <span class="n">IPlugin</span><span class="p">,</span> <span class="n">getPlugins</span>
<span class="nb">list</span><span class="p">(</span><span class="n">getPlugins</span><span class="p">(</span><span class="n">IPlugin</span><span class="p">))</span>
</pre></div>
</div>
<p>As mentioned, it is normal for exceptions to be raised
<strong>once</strong> here if plugins have been removed.</p>
</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this heading">Â¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="components.html"><span class="doc">Components: Interfaces and Adapters</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="basics.html" class="btn btn-neutral float-right" title="The Basics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cred.html" class="btn btn-neutral float-left" title="Cred: Pluggable Authentication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Twisted Matrix Labs. Ver 22.4.0.post0. Built on 2022-09-04.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>